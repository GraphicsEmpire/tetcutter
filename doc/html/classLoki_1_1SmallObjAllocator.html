<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>tetcutter: Loki::SmallObjAllocator Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tetcutter
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">High-Performance cutting tetrahedral meshes.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespaceLoki.html">Loki</a></li><li class="navelem"><a class="el" href="classLoki_1_1SmallObjAllocator.html">SmallObjAllocator</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="classLoki_1_1SmallObjAllocator-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">Loki::SmallObjAllocator Class Reference<div class="ingroups"><a class="el" href="group__SmallObjectGroup.html">Small objects</a> &raquo; <a class="el" href="group__SmallObjectGroupInternal.html">Internals</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="SmallObj_8h_source.html">SmallObj.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for Loki::SmallObjAllocator:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classLoki_1_1SmallObjAllocator.png" usemap="#Loki::SmallObjAllocator_map" alt=""/>
  <map id="Loki::SmallObjAllocator_map" name="Loki::SmallObjAllocator_map">
<area href="classLoki_1_1AllocatorSingleton.html" alt="Loki::AllocatorSingleton&lt; ThreadingModel, chunkSize, maxSmallObjectSize, objectAlignSize, LifetimePolicy, MutexPolicy &gt;" shape="rect" coords="0,56,710,80"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa41bb717d552cd0df57a941def7ec607"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoki_1_1SmallObjAllocator.html#aa41bb717d552cd0df57a941def7ec607">Allocate</a> (std::size_t size, bool doThrow)</td></tr>
<tr class="separator:aa41bb717d552cd0df57a941def7ec607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b669733cfa9dd157603d13d979f8c1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoki_1_1SmallObjAllocator.html#a2b669733cfa9dd157603d13d979f8c1c">Deallocate</a> (void *p, std::size_t size)</td></tr>
<tr class="separator:a2b669733cfa9dd157603d13d979f8c1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50406896d75a2591d4bd7dc53325e3d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoki_1_1SmallObjAllocator.html#a50406896d75a2591d4bd7dc53325e3d6">Deallocate</a> (void *p)</td></tr>
<tr class="separator:a50406896d75a2591d4bd7dc53325e3d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae49e9de3fd7b2fd93676cc1d63299b0d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae49e9de3fd7b2fd93676cc1d63299b0d"></a>
std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoki_1_1SmallObjAllocator.html#ae49e9de3fd7b2fd93676cc1d63299b0d">GetMaxObjectSize</a> () const </td></tr>
<tr class="memdesc:ae49e9de3fd7b2fd93676cc1d63299b0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns max # of bytes which this can allocate. <br /></td></tr>
<tr class="separator:ae49e9de3fd7b2fd93676cc1d63299b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1c8a2a3d7e9368ab59422ddd082105c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab1c8a2a3d7e9368ab59422ddd082105c"></a>
std::size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoki_1_1SmallObjAllocator.html#ab1c8a2a3d7e9368ab59422ddd082105c">GetAlignment</a> () const </td></tr>
<tr class="memdesc:ab1c8a2a3d7e9368ab59422ddd082105c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns # of bytes between allocation boundaries. <br /></td></tr>
<tr class="separator:ab1c8a2a3d7e9368ab59422ddd082105c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b635664b20a6984303dabde86c8ac83"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoki_1_1SmallObjAllocator.html#a6b635664b20a6984303dabde86c8ac83">TrimExcessMemory</a> (void)</td></tr>
<tr class="separator:a6b635664b20a6984303dabde86c8ac83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b7fbd5bf5fc56e45754abd2497ad18f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoki_1_1SmallObjAllocator.html#a2b7fbd5bf5fc56e45754abd2497ad18f">IsCorrupt</a> (void) const </td></tr>
<tr class="separator:a2b7fbd5bf5fc56e45754abd2497ad18f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a3d40b34b1a2d08a6bb9d9fa22ab5ce24"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoki_1_1SmallObjAllocator.html#a3d40b34b1a2d08a6bb9d9fa22ab5ce24">SmallObjAllocator</a> (std::size_t pageSize, std::size_t maxObjectSize, std::size_t objectAlignSize)</td></tr>
<tr class="separator:a3d40b34b1a2d08a6bb9d9fa22ab5ce24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c861c4605844ee30dbe2a4f533fe2ae"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classLoki_1_1SmallObjAllocator.html#a0c861c4605844ee30dbe2a4f533fe2ae">~SmallObjAllocator</a> (void)</td></tr>
<tr class="separator:a0c861c4605844ee30dbe2a4f533fe2ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Manages pool of fixed-size allocators. Designed to be a non-templated base class of <a class="el" href="classLoki_1_1AllocatorSingleton.html">AllocatorSingleton</a> so that implementation details can be safely hidden in the source code file. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a3d40b34b1a2d08a6bb9d9fa22ab5ce24"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Loki::SmallObjAllocator::SmallObjAllocator </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>pageSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>maxObjectSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>objectAlignSize</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>The only available constructor needs certain parameters in order to initialize all the <a class="el" href="classLoki_1_1FixedAllocator.html">FixedAllocator</a>'s. This throws only if </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pageSize</td><td># of bytes in a page of memory. </td></tr>
    <tr><td class="paramname">maxObjectSize</td><td>Max # of bytes which this may allocate. </td></tr>
    <tr><td class="paramname">objectAlignSize</td><td># of bytes between alignment boundaries. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0c861c4605844ee30dbe2a4f533fe2ae"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">Loki::SmallObjAllocator::~SmallObjAllocator </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Destructor releases all blocks, all Chunks, and <a class="el" href="classLoki_1_1FixedAllocator.html">FixedAllocator</a>'s. Any outstanding blocks are unavailable, and should not be used after this destructor is called. The destructor is deliberately non-virtual because it is protected, not public. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aa41bb717d552cd0df57a941def7ec607"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * Loki::SmallObjAllocator::Allocate </td>
          <td>(</td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>doThrow</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocates a block of memory of requested size. Complexity is often constant-time, but might be O(C) where <a class="el" href="classC.html">C</a> is the number of Chunks in a <a class="el" href="classLoki_1_1FixedAllocator.html">FixedAllocator</a>.</p>
<dl class="section user"><dt>Exception Safety Level</dt><dd>Provides either strong-exception safety, or no-throw exception-safety level depending upon doThrow parameter. The reason it provides two levels of exception safety is because it is used by both the nothrow and throwing new operators. The underlying implementation will never throw of its own accord, but this can decide to throw if it does not allocate. The only exception it should emit is std::bad_alloc.</dd></dl>
<dl class="section user"><dt>Allocation Failure</dt><dd>If it does not allocate, it will call TrimExcessMemory and attempt to allocate again, before it decides to throw or return NULL. Many allocators loop through several new_handler functions, and terminate if they can not allocate, but not this one. It only makes one attempt using its own implementation of the new_handler, and then returns NULL or throws so that the program can decide what to do at a higher level. (Side note: Even though the C++ Standard allows allocators and new_handlers to terminate if they fail, the <a class="el" href="namespaceLoki.html">Loki</a> allocator does not do that since that policy is not polite to a host program.)</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td># of bytes needed for allocation. </td></tr>
    <tr><td class="paramname">doThrow</td><td>True if this should throw if unable to allocate, false if it should provide no-throw exception safety level. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>NULL if nothing allocated and doThrow is false. Else the pointer to an available block of memory. </dd></dl>

</div>
</div>
<a class="anchor" id="a2b669733cfa9dd157603d13d979f8c1c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Loki::SmallObjAllocator::Deallocate </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocates a block of memory at a given place and of a specific size. Complexity is almost always constant-time, and is O(C) only if it has to search for which <a class="el" href="classLoki_1_1Chunk.html">Chunk</a> deallocates. This never throws. </p>

</div>
</div>
<a class="anchor" id="a50406896d75a2591d4bd7dc53325e3d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Loki::SmallObjAllocator::Deallocate </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>p</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocates a block of memory at a given place but of unknown size size. Complexity is O(F + <a class="el" href="classC.html">C</a>) where F is the count of <a class="el" href="classLoki_1_1FixedAllocator.html">FixedAllocator</a>'s in the pool, and <a class="el" href="classC.html">C</a> is the number of Chunks in all <a class="el" href="classLoki_1_1FixedAllocator.html">FixedAllocator</a>'s. This does not throw exceptions. This overloaded version of Deallocate is called by the nothow delete operator - which is called when the nothrow new operator is used, but a constructor throws an exception. </p>

</div>
</div>
<a class="anchor" id="a2b7fbd5bf5fc56e45754abd2497ad18f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Loki::SmallObjAllocator::IsCorrupt </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true if anything in implementation is corrupt. Complexity is O(F + <a class="el" href="classC.html">C</a> + <a class="el" href="classB.html">B</a>) where F is the count of <a class="el" href="classLoki_1_1FixedAllocator.html">FixedAllocator</a>'s in the pool, <a class="el" href="classC.html">C</a> is the number of Chunks in all <a class="el" href="classLoki_1_1FixedAllocator.html">FixedAllocator</a>'s, and <a class="el" href="classB.html">B</a> is the number of blocks in all Chunks. If it determines any data is corrupted, this will return true in release version, but assert in debug version at the line where it detects the corrupted data. If it does not detect any corrupted data, it returns false. </p>

</div>
</div>
<a class="anchor" id="a6b635664b20a6984303dabde86c8ac83"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Loki::SmallObjAllocator::TrimExcessMemory </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases empty Chunks from memory. Complexity is O(F + <a class="el" href="classC.html">C</a>) where F is the count of <a class="el" href="classLoki_1_1FixedAllocator.html">FixedAllocator</a>'s in the pool, and <a class="el" href="classC.html">C</a> is the number of Chunks in all <a class="el" href="classLoki_1_1FixedAllocator.html">FixedAllocator</a>'s. This will never throw. This is called by AllocatorSingleto::ClearExtraMemory, the new_handler function for <a class="el" href="namespaceLoki.html">Loki</a>'s allocator, and is called internally when an allocation fails. </p><dl class="section return"><dt>Returns</dt><dd>True if any memory released, or false if none released. </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>/Users/pourya/Desktop/platform/repos/tetcutter/src/3rdparty/loki/include/loki/<a class="el" href="SmallObj_8h_source.html">SmallObj.h</a></li>
<li>/Users/pourya/Desktop/platform/repos/tetcutter/src/3rdparty/loki/src/SmallObj.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Feb 16 2016 17:37:27 for tetcutter by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
